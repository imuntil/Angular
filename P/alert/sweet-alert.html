<!DOCTYPE html>
<html ng-app="myApp">
<head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="../../Bootstrap/bootstrap.css"/>
    <link rel="stylesheet" href="sweet-alert.css"/>
    <script src="../../framework/1.4.7/angular.js"></script>
    <script src="../../framework/1.4.7/angular-animate.js"></script>
</head>
<body ng-controller="SweetAlertController">

<apd-sweet-alert heading="heading" text="text"
                 view-alert="show"></apd-sweet-alert>

<script type="text/ng-template" id="alert-template.html">
    <div>
        <div ng-show="viewAlert" class="sweet-overlay"></div>
        <div ng-show="viewAlert" class="sweet-alert">
            <h3>{{heading}}</h3>
            <p>{{text}}</p>
            <button class="confirm" ng-click="close()">OK</button>
        </div>
    </div>
</script>
<script>
    angular.module('apd.sweetalert', ['ngAnimate'])
            .factory('sweetAlertData', function () {
                var alert = {
                    heading:'this is a title',
                    text:'this is contens',
                    show:false
                };
                return {
                    swalShow: function (data) {
                        angular.extend(alert, data);
                        alert.show = true;
                        console.log(alert);
                    },
                    swalHide: function (fn) {
                        alert.show = false;
                        angular.isFunction(fn) && fn();
                        console.log(alert);
                    },
                    alert:alert
                }
            })
            .controller('ApdSweetAlertController', ['sweetAlertData', '$scope', function (swald, $scope) {

            }])
            .directive('apdSweetAlert', function () {
                return {
                    restrict:'EA',
                    templateUrl:'alert-template.html',
                    replace:true,
                    controller:'ApdSweetAlertController',
                    scope:{
                        heading:'=',
                        text:'=',
                        viewAlert:'='
                    }
                }
            })
</script>
<script>
    angular.module('myApp', ['apd.sweetalert'])
            .controller('SweetAlertController', ['$scope', 'sweetAlertData', function ($scope, swal) {
                swal.swalShow({heading:'...'});

//                swal.swalHide(function () {
//                    console.log('ddd');
//                })

            }]);
</script>
</body>
</html>